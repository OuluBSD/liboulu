machine sdl.app: {
	
	driver context: {
		sdl.context: true;
	};
	
	chain program: {
		state event.register;
		
		loop center.events: {
			center.customer: true;
			sdl.event.pipe: true;
			state.event.pipe: true {target: event.register;};
		};
		
		loop ogl.fbo: {
			ogl.customer: true;
			sdl.ogl.fbo.program: true {
				drawmem:		"false";
				program:		"obj_view";
				shader.default.frag.path:		"shaders/tests/07j_fragment.glsl";
				shader.default.vtx.path:		"shaders/tests/07j_vertex.glsl";
				shader.sky.frag.path:			"shaders/tests/03n_skybox_fragment.glsl";
				shader.sky.vtx.path:			"shaders/tests/03n_skybox_vertex.glsl";
			};
			sdl.fbo.sink: true {
				close_machine:	true;
				sizeable:		true;
				env:			event.register;
			};
		};
		
	};

};

engine ecs.dummy: {
    system rendering;
    system entity.store;
    system component.store;
    system events;
    system interaction: {env: event.register;};
    system physics: {rm.outsiders: true; rm.area.size: 20;};
    system player;
    system paintstroke;
    system toolbox: {test.tool.changer: true;};
    system painting;
    system shooting;
    system throwing;
    
    
    pool world: {
        entity ground: {
            comp transform3;
            comp model: {builtin: plane; texture: "imgs/sauerbraten/blindabuser/ba_grass_cc.jpg";};
            comp physics: {bind: physics; test.fn: fixed;};
        };
        
        entity box: {
            comp transform3: {y: 1;};
            comp body;
            comp model: {builtin: box;};
            comp physics: {bind: physics; test.fn: fixed;};
        };
        
        entity player.body: {
            comp transform3: {x: 0; y: 0; z: 6;};
            comp physics: {bind: physics;};
            comp player.body: {height: 1.74;};
        };
        
        entity player.head: {
            comp transform3;
            comp viewable;
            comp viewport: {fov: 90;};
            comp camera.chase;
            comp player.head: {body: world.player.body;};
        };
        
        entity player.hand.left: {
            comp transform3;
            comp body;
            comp model: {builtin: "cylinder,0.02,0.2"; yaw: +90;};
            comp player.hand: {hand: left; body: world.player.body; simulated: true;};
        };
        
        entity player.hand.right: {
            comp transform3;
            comp body;
            comp model: {builtin: "cylinder,0.02,0.2"; yaw: +90;};
            comp player.hand: {hand: right; body: world.player.body; simulated: true;};
        };
        
        entity tool: {
            comp transform3;
            comp tool: {hand: world.player.hand.right;};
            comp model: {always.enabled: true;};
            comp paint;
            comp shoot;
            comp throw;
        };
        
    };
};
