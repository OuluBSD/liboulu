machine daw.core:
	meta int channel.count = 10
	
	meta loopstmt channel.effects():
		corefx.pipe: filter="chorus"
		corefx.pipe: filter="jcrev"
	
	meta params channel.links():
		meta for int i, i < channel.count, i++:
			loop channel.$i
	
	chain program:
		meta for int i, i < channel.count, i++:
			loop channel.$i:
				center.owner
				softinstru.pipe [true]:
					filepath = "TimGM6mb.sf2"
					verbose = false
				$channel.effects()
				audio.side.splitter [][true]
		
		loop event:
			center.owner
			midi.file.reader [][$channel.links()]:
				filepath = "midi/short_piano.mid"
				close_machine = true
				separate.channels = true
		
		loop master.out:
			center.owner
			audio.mixer[$channel.links()]
			center.audio.sink.hw
		
	
